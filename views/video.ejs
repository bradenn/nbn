<!DOCTYPE html>
<html lang="en" data-theme="dark">
<%- include("partials/header.ejs"); %>

<body>
  <%- include("partials/nav.ejs"); %>
  <div class="container" style="margin-top:32px;">
    <div class="row">

      <div class="col-md-2"></div>
      <div class="col-md-8">
        <% if(!video.published){ %>
        <div class="alert alert-warning">
          <strong>Warning!</strong> This video has not been published yet. Sharing this article link will breach contract.
        </div>
        <% } %>
        <div class="post">
          <div class="post-element" style="text-align:center;">
            <span class="post-title"><%= video.title %></span>
          </div>
          <iframe height="500" style="width:100%;" src="https://www.youtube.com/embed/<%= video.link  %>" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          <div class="post-element" style="margin-top:8px; margin-bottom:8px;">
            <span class="post-subtext">posted by <strong><a href="/u/<%= video.owner.username %>" class="no-bs"><%= video.owner.username %></a></strong></span>
            <span class="post-subtext">Last updated <strong><%= new Date(video.date).toLocaleString()  %></strong></span>
          </div>
          <br>
          <div class="post-options">
            <ul class="list-inline">
              <li><a href="#" class="list-inline-item disabled"><%= video.views %>&nbsp;Views</a></li>
              <li><a href="#" class="list-inline-item"><i class="fas fa-share"></i>&nbsp; Share</a></li>
            </ul>
          </div>
          <div class="post-preview">
            <span class="post-preview-text"><%- video.body %></span>
          </div>
        </div>
      </div>
      <div class="col-md-2"></div>
    </div>
</body>

</html>

<%

function timeSince(date) {

  var seconds = Math.floor((new Date() - date) / 1000);

  var interval = Math.floor(seconds / 31536000);

  if (interval >= 1) {
    return interval + " years";
  }
  interval = Math.floor(seconds / 2592000);
  if (interval >= 1) {
    return interval + " months";
  }
  interval = Math.floor(seconds / 86400);
  if (interval >= 1) {
    return interval + " days";
  }
  interval = Math.floor(seconds / 3600);
  if (interval >= 1) {
    return interval + " hours";
  }
  interval = Math.floor(seconds / 60);
  if (interval >= 1) {
    return interval + " minutes";
  }
  return Math.floor(seconds) + " seconds";
}
var aDay = 24*60*60*1000
%>
