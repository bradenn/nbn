<!DOCTYPE html>
<html lang="en" <% if(user != null){ %>data-theme="<%= user.theme %>" <% }else{ %> data-theme="dark" <% } %>>
<%- include("partials/header.ejs"); %>

<body>
  <%- include("partials/nav.ejs"); %>
  <div class="container" style="margin-top:32px;">
    <div class="row" style=" margin-bottom:16px;">
      <div class="col-md-12">
        <div class="card">
          <div class="user-card">
            <div class="cont">
              <img src="<%= target.picture %>" class="user-img">
            </div>
            <div class="cont">
              <h5><%= target.firstname %> <%= target.lastname %></h5>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3">
        <div class="card">
          <div class="card-head" style="margin-bottom:8px;">
            <span class="card-head-title">Actions</span>
          </div>
          <div class="">
            <% var c = false;
            user.following.forEach(function(tar){
            if(tar._id.toString() == target._id.toString()){
            c = true;
            }
          });
          %>
            <% if(c){ %>
            <a href="/u/<%= target._id %>/unfollow" class="btn btn-secondary">Unfollow</a>
            <%}else{%>
            <a href="/u/<%= target._id %>/follow" class="btn btn-primary">Follow</a>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>

<%

function timeSince(date) {

  var seconds = Math.floor((new Date() - date) / 1000);

  var interval = Math.floor(seconds / 31536000);

  if (interval >= 1) {
    return interval + " years";
  }
  interval = Math.floor(seconds / 2592000);
  if (interval >= 1) {
    return interval + " months";
  }
  interval = Math.floor(seconds / 86400);
  if (interval >= 1) {
    return interval + " days";
  }
  interval = Math.floor(seconds / 3600);
  if (interval >= 1) {
    return interval + " hours";
  }
  interval = Math.floor(seconds / 60);
  if (interval >= 1) {
    return interval + " minutes";
  }
  return Math.floor(seconds) + " seconds";
}
var aDay = 24*60*60*1000
%>
