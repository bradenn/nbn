<!DOCTYPE html>
<html lang="en" <% if(user != null){ %>data-theme="<%= user.theme %>" <% }else{ %> data-theme="dark" <% } %>>
<%- include("partials/header.ejs"); %>

<body>
  <%- include("partials/nav.ejs"); %>
  <div class="container" style="margin-top:32px;">
    <div class="row">



            <% topics.forEach((topic) => { %>
              <div class="col-md-4">
                <a href="/topic/<%= topic._id %>" class="no-bs">
            <div class="card mb-3" style="max-width: 540px;">
              <div class="row no-gutters">
                <div class="col-md-4">
                  <div src="" class="card-img-fill" style="background-image: url(<%= topic.picture %>);"></div>
                </div>
                <div class="col-md-8">
                  <div class="card-body">
                    <h5 class="card-title"><%= topic.title %></h5>
                    <p class="card-text"><small class="text-muted">Last updated <%= timeSince(new Date(topic.date)) %> ago</small></p>
                  </div>
                </div>
              </div>
            </div>
          </a>
            </div>
            <% }); %>


      <div class="col-md-3">

      </div>

    </div>
  </div>


</body>
<%- include("partials/footer.ejs"); %>

</html>

<%
function timeSince(date) {

  var seconds = Math.floor((new Date() - date) / 1000);

  var interval = Math.floor(seconds / 31536000);

  if (interval >= 1) {
    return interval + " years";
  }
  interval = Math.floor(seconds / 2592000);
  if (interval >= 1) {
    return interval + " months";
  }
  interval = Math.floor(seconds / 86400);
  if (interval >= 1) {
    return interval + " days";
  }
  interval = Math.floor(seconds / 3600);
  if (interval >= 1) {
    return interval + " hours";
  }
  interval = Math.floor(seconds / 60);
  if (interval >= 1) {
    return interval + " minutes";
  }
  return Math.floor(seconds) + " seconds";
}
var aDay = 24*60*60*1000


%>
